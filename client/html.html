<!-- napraw sume order w foot -->
<head>
 	<title>Wawelska Kooperatywa Spożywcza</title>
</head>

<body>
	<header>
		{{>loginButtons}}
	 	<h1>Wawelska Kooperatywa Spożywcza</h1>
	 	{{>insertProduct}}
	</header>
	<main>
		{{>productsList}}
		{{>ordersList}}
	</main>
</body>

<template name="productsList">
	<h2>Lista produktów</h2>
 	<table id="productsList">
 		<thead>
 			<tr>
 				<th class="name">Nazwa{{#if nameTriangle}} {{{sortOrder}}}{{/if}}</th>
 				<th class="producer">Producent{{#if producerTriangle}} {{{sortOrder}}}{{/if}}</th>
 				<th class="price">Cena{{#if priceTriangle}} {{{sortOrder}}}{{/if}}</th>
 				{{#if currentUser}}
 					<th>Ilość</th>
 				{{/if}}
 			</tr>
 		</thead>
 		<!-- <tfoot><tr><td>Pusto!{{orderSum}}</td></tr></tfoot> -->
 		<tbody>
			{{#each showProducts}}
  			<tr>
  				<td>{{productName}}</td>
	  			<td>{{producer}}</td>
	  			<td>{{price}} zł/{{unit}}</td>
	  			<td>
	  				{{#if currentUser}}
                        {{#if isInRole 'buyer'}}
                            <form class="orderProduct">
                                <input type="number" name="quantity" min="0" max="10" step="0.1" />
                                /{{quantity}}
                                <button class="submit">ok</button>
                            </form>
                        {{/if}}
                        {{#if isInRole 'seller'}}
                            {{quantity}}
                        {{/if}}
					{{/if}}
				</td>
				{{#if currentUser}}
                    {{#if isInRole 'seller'}}
					    <td><button class="delete">&times;</button></td>
                    {{/if}}
				{{/if}}
			</tr>
			{{/each}}
		</tbody>
	</table>
</template>

<template name="ordersList">
	{{#if currentUser}}
        {{#if isInRole 'buyer'}}
            <h2>Zamówienie</h2>
            <table>
                <thead>
                        <tr>
                            <th>Ilość</th>
                            <th>Nazwa</th>
                            <th>Producent</th>
                            <th>Cena</th>
                            <th></th>
                        </tr>
                </thead>
                <tbody>
                    {{#each showOrders}}
                        <tr>
                            <td>{{quantity}} {{unit}}</td>
                            <td>{{productName}}</td>
                            <td>{{producer}}</td>
                            <td>{{summedPrice}}</td>
                            <td><button class="delete">&times;</button></td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        {{/if}}
    {{/if}}
</template>

<template name="insertProduct">
    {{#if isInRole 'seller'}}
        <form class="insertProduct">
            <input type="text" name="productName" placeholder="Nazwa produktu" />
            <input type="text" name="producer" placeholder="Producent" />
            <input type="number" name="price" placeholder="Cena" />
            <input type="number" name="quantity" placeholder="Ilość" />
            <input type="radio" name="unit" value="kg" checked/>kg
            <input type="radio" name="unit" value="szt"/>szt.
            <input type="submit" value="Dodaj produkt" class="submitProd">
        </form>
    {{/if}}
</template>