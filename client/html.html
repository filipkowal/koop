<!-- napraw sume order w foot -->
<head>
 	<title>Wawelska Kooperatywa Spożywcza</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <div class="row">
                {{atNavButton}}
                {{#if currentUser}}
                    <a class="btn-flat logout">Wyloguj</a>
                {{else}}
                    <!-- Modal Trigger -->
                    <a class="waves-effect waves-light btn-flat modal-trigger login" href="#modal1">Zaloguj</a>

                    <!-- Modal Structure -->
                    <div id="modal1" class="modal">
                        <div class="modal-content">
                            {{> atForm}}
                        </div>
                    </div>
                {{/if}}
                <!--loginButtons:{{> loginButtons}}-->

                <h3 class="center">Wawelska Kooperatywa Spożywcza</h3>
                {{>insertProduct}}
            </div>
        </header>
        <main>
            <div class="row">
                <div class="col s8">
                    {{>productsList}}
                </div>
                <div class="col s4">
                    {{>ordersList}}
                </div>
            </div>
        </main>
    </div>
</body>

<template name="productsList">

 	<table id="productsList centered">
        <caption><h5>Lista produktów</h5></caption>
 		<thead>
 			<tr>
 				<th class="name">Nazwa{{#if nameTriangle}} {{{sortOrder}}}{{/if}}</th>
 				<th class="producer">Producent{{#if producerTriangle}} {{{sortOrder}}}{{/if}}</th>
 				<th class="price">Cena{{#if priceTriangle}} {{{sortOrder}}}{{/if}}</th>
                <th>Max</th>
 				{{#if currentUser}}
 					<th>Ilość</th>
 				{{/if}}
 			</tr>
 		</thead>
 		<!-- <tfoot><tr><td>Pusto!{{orderSum}}</td></tr></tfoot> -->
 		<tbody>
			{{#each showProducts}}
  			<tr>
  				<td>{{productName}}</td>
	  			<td>{{producer}}</td>
	  			<td>{{price}} zł/{{unit}}</td>
                <td>{{quantity}}</td>
	  			<td>
                    <!--<div class="col s6">-->
	  				{{#if currentUser}}
                        {{#if isInRole 'buyer'}}
                            <!--<form class="orderProduct">-->
                                <input type="text" name="quantity" min="0" max="10" step="0.1" class="orderProduct quantity" />
                                <!--<button class="submit waves-effect waves-light btn col s7">ok</button>-->
                            <!--</form>-->
                        {{/if}}
                        {{#if isInRole 'seller'}}
                            {{quantity}}
                        {{/if}}
					{{/if}}
                    <!--</div>-->
				</td>
				{{#if currentUser}}
                    {{#if isInRole 'seller'}}
					    <td><button class="delete waves-effect waves-teal btn-flat">
                            <i class="material-icons delete">close</i>
                        </button></td>
                    {{/if}}
				{{/if}}
			</tr>
			{{/each}}
		</tbody>
	</table>
</template>

<template name="ordersList">
	{{#if currentUser}}
        {{#if isInRole 'buyer'}}
            <table>
                <caption><h5>Zamówienie</h5></caption>
                <thead>
                        <tr>
                            <th>Ilość</th>
                            <th>Nazwa</th>
                            <th>Producent</th>
                            <th>Cena</th>
                            <th></th>
                        </tr>
                </thead>
                <tbody>
                    {{#each showOrders}}
                        <tr>
                            <td>{{quantity}} {{unit}}</td>
                            <td>{{productName}}</td>
                            <td>{{producer}}</td>
                            <td>{{summedPrice}}</td>
                            <td><button class="delete waves-effect waves-teal btn-flat">
                                <i class="material-icons delete">close</i>
                            </button></td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        {{/if}}
    {{/if}}
</template>

<template name="insertProduct">
    {{#if isInRole 'seller'}}
        <form class="insertProduct">
            <input type="text" name="productName" placeholder="Nazwa produktu" />
            <input type="text" name="producer" placeholder="Producent" />
            <input type="text" name="price" placeholder="Cena" />
            <input type="text" name="quantity" placeholder="Ilość" />
            <!--<input type="radio" name="unit" value="kg" checked/>kg-->
            <!--<input type="radio" name="unit" value="szt"/>szt.-->
            <input name="unit" type="radio" id="kg" value="kg" checked/>
            <label for="kg">kg</label>
            <input name="unit" type="radio" id="szt" value="szt." />
            <label for="szt">szt.</label>
            <input type="submit" value="Dodaj produkt" class="submitProd waves-effect waves-teal btn">
        </form>
    {{/if}}
</template>